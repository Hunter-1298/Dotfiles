# Set terminal type for 256-color support
set -g default-terminal "screen-256color"

# Unbind default split-window keys and assign new ones
unbind %
unbind '"'
unbind h   # Unbind the default action of 'h' (pane navigation)

# Assign 'h' to horizontal split and 'v' to vertical split
bind n split-window -h   # Horizontal split with 'h'
bind v split-window -v   # Vertical split with 'v'

# Resize panes with vim-style keys (j/k/l/h)
bind -r j resize-pane -D 5
bind -r k resize-pane -U 5
bind -r l resize-pane -R 5
bind -r h resize-pane -L 5

# Toggle zoom with 'm'
bind -r m resize-pane -Z

# Enable mouse support (to resize and select with the mouse)
set -g mouse on

# Set vi-mode keybindings for copy mode
set-window-option -g mode-keys vi

# Custom keybindings for copy mode (vim-style selection)
bind-key -T copy-mode-vi 'v' send -X begin-selection   # Start selecting text with "v"
bind-key -T copy-mode-vi 'y' send -X copy-selection    # Copy text with "y"
unbind -T copy-mode-vi MouseDragEnd1Pane  # Don't exit copy mode after dragging with mouse

# Plugin Manager setup using TPM (Tmux Plugin Manager)
set -g @plugin 'tmux-plugins/tpm'

# List of Tmux plugins
set -g @plugin 'christoomey/vim-tmux-navigator'   # For navigating between panes and vim/nvim using Ctrl-hjkl
set -g @plugin 'jimeh/tmux-themepack'             # Tmux theme
set -g @plugin 'tmux-plugins/tmux-resurrect'       # Persist tmux sessions after a restart
set -g @plugin 'tmux-plugins/tmux-continuum'       # Automatically save sessions every 15 minutes

# Tmux theme configuration
set -g @themepack 'powerline/default/cyan'   # Powerline theme with cyan color

# Tmux resurrect settings
set -g @resurrect-capture-pane-contents 'on'  # Capture pane contents for tmux-resurrect
set -g @continuum-restore 'on'                # Enable auto-restore with tmux-continuum

# Initialize Tmux Plugin Manager (must stay at the bottom of the file)
run '~/.tmux/plugins/tpm/tpm'
